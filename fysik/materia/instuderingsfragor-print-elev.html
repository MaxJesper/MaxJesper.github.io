<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Instuderingsfrågor – Materia (Elev)</title>
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/instudering.css" />
</head>

<body>
  <header class="fysik-header">
    <h1>Instuderingsfrågor</h1>
    <p>Materia (åk 7) – elev</p>
  </header>

  <button class="hamburger" onclick="toggleMenu()">☰</button>
  <nav id="side-menu"></nav>

  <main>
    <div class="print-note">
      <div class="print-field">
        <span class="print-label">Namn:</span>
        <span class="print-line print-line-name"></span>
      </div>
      <div class="print-field">
        <span class="print-label">Klass:</span>
        <span class="print-line print-line-class"></span>
      </div>
    </div>

    <div id="study-container"></div>
  </main>

  <script src="/js/menu.js"></script>
  <script src="/js/render-instudering.js"></script>
  <script>
    renderStudySet({
      jsonPath: "/fysik/materia/data/instuderingsfragor.json",
      mountId: "study-container",
      mode: "print-student"
    });

    function autoPrintAndClose() {
      // Stäng när print-dialogen är klar (gäller även Avbryt i de flesta browsers)
      window.addEventListener("afterprint", () => {
        try { window.close(); } catch (e) {}
      });

      // Fallback: om afterprint inte triggar, stäng ändå efter en kort stund
      setTimeout(() => {
        try { window.close(); } catch (e) {}
      }, 2500);

      window.print();
    }

    window.addEventListener("load", () => {
      // liten delay så JSON-renderingen hinner in
      setTimeout(autoPrintAndClose, 350);
    });
  </script>
</body>
</html>
